// Generated by CoffeeScript 1.7.1
var __slice = [].slice;

Meteor.startup(function() {
  var old_console;
  if (Meteor.is_server) {
    tron.use_color = true;
  }
  if (Meteor.is_client) {
    tron.use_color = false;
  }
  old_console = tron.console;
  tron.unsubscribe(old_console);
  tron.console = function(fn, args) {
    Meteor.call('sync_tron', tron, Meteor.is_client, fn, args, function() {});
    return old_console(fn, args);
  };
  tron.subscribe(tron.console);
  tron._test = tron.test;
  return tron.test = function() {
    var args, _ref;
    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    if (_.isEmpty(args)) {
      return Meteor.call('tron_test');
    } else {
      return (_ref = tron._test).call.apply(_ref, [tron].concat(__slice.call(args)));
    }
  };
});

Meteor.methods({
  sync_tron: function(tron_object, is_client, fn, args) {
    if (is_client !== Meteor.is_client) {
      tron.sync(tron_object);
      return console[fn].apply(console, args);
    }
  },
  tron_test: function() {
    return tron._test();
  }
});
